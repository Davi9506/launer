<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
         "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ez.launer.laundryService.order.model.OrderDAO">




    <!--주문 리스트 조회-->
    <select id="selectOrderDetails" parameterType="int" resultType="hashMap">
        select * from ORDER_DETAIL_VIEW
        where ORDER_NO = #{orderNo}
    </select>

    <!--지점에 해당하는 주문 view 리턴-->
    <select id="orderOfficeView" parameterType="orderListSearchVo" resultType="hashMap">
        select * from (
            select ROWNUM as RNUM, A.*
            from
            (
                select * from ORDERS_OFFICENO_VIEW
                where OFFICE_NO = #{officeNo}
                  and ORDER_STATUS_NO = #{orderStatusNo} and ${listType} is null
            ) A
        ) B
        where RNUM > #{firstRecordIndex}
        <![CDATA[
			and RNUM <= #{firstRecordIndex} + #{recordCountPerPage}
		]]>
    </select>

    <!--지점에 해당하는 주문 view 전체 개수-->
    <select id="orderCount" parameterType="orderListSearchVo" resultType="int">
        select count(*) from ORDERS_OFFICENO_VIEW
        where OFFICE_NO = #{officeNo}
          and ORDER_STATUS_NO = #{orderStatusNo} and ${listType} is null
    </select>
</mapper>