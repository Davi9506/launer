<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
         "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ez.launer.point.model.PointDAO">
    <!--회원 포인트 내역  조회-->
    <select id="selectPointHistory" parameterType="PointViewVo" resultType="Map">
        select * from point_history_view
	    where users_no =#{usersNo}
    </select>
    
    
   <resultMap type="PointViewVo" id="pointHistoryAll">
        <association property="selectPointHistory" column="no" javaType="map">
            <id column="no" jdbcType="BIGINT" property="NO"/>
            <result column="point_no" jdbcType="BIGINT" property="POINT_NO"/>
            <result column="users_no" jdbcType="BIGINT" property="USERS_NO"/>
            <result column="order_no" jdbcType="BIGINT" property="ORDER_NO"/>
            <result column="regdate" jdbcType="TIMESTAMP" property="REGDATE"/>
            <result column="total_price" jdbcType="BIGINT" property="TOTAL_PRICE"/>
            <result column="point" jdbcType="BIGINT" property="POINT"/>
        </association>
        <collection property="pointHistory" column="usersNo"
                    javaType="ArrayList" ofType="map" select="selectPointHistory">
        </collection>
        </resultMap>
</mapper>